# SECS Game Server API Documentation

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (2024-07)

- **–ú–∞—Ç—á–º–µ–π–∫–∏–Ω–≥ –ø–æ–ª–Ω–æ—Å—Ç—å—é in-memory**: –æ—á–µ—Ä–µ–¥–∏ –∏ –∞–∫—Ç–∏–≤–Ω—ã–µ –º–∞—Ç—á–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –ø–∞–º—è—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞, –Ω–µ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.
- **–í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö**: —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ (–∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ) –º–∞—Ç—á–∏.
- **–ü–æ—Å–ª–µ —Ä–µ—Å—Ç–∞—Ä—Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞**: –æ—á–µ—Ä–µ–¥–∏ –∏ –∞–∫—Ç–∏–≤–Ω—ã–µ –º–∞—Ç—á–∏ —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è, –±–∞–∑–∞ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç "–∑–∞–≤–∏—Å—à–∏—Ö" –º–∞—Ç—á–µ–π.
- **–í—Å–µ API –¥–ª—è –æ—á–µ—Ä–µ–¥–µ–π –∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö –º–∞—Ç—á–µ–π —Ä–∞–±–æ—Ç–∞—é—Ç —Å in-memory —Å–µ—Ä–≤–∏—Å–æ–º**.
- **–ò—Å—Ç–æ—Ä–∏—è –º–∞—Ç—á–µ–π**: —Ç–æ–ª—å–∫–æ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ –º–∞—Ç—á–∏ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –±–∞–∑—É –∏ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã.

---

## –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

**–ë–∞–∑–æ–≤—ã–π URL**: `https://renderfin.com`
**–í–µ—Ä—Å–∏—è API**: 1.0
**–§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö**: JSON

## –ó–∞–ø—É—Å–∫ –∏ —Ä–∞–±–æ—Ç–∞ —Å —Å–µ—Ä–≤–µ—Ä–æ–º

### 1. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ –±–∞—Ç–Ω–∏–∫
.\start_server.bat

# –ò–ª–∏ —á–µ—Ä–µ–∑ dotnet
dotnet run

# –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
dotnet build
```

### 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API

```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
python test_new_user_mmr.py

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
python Bots/test_api.py
```

### 3. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞–º–∏

```bash
# –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã –±–æ—Ç–æ–≤
cd Bots
.\start_bots.bat

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –±–æ—Ç–æ–≤
.\show_stats.bat

# –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –±–æ—Ç–æ–≤ –≤—Å—Ç—Ä–æ–µ–Ω–∞ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –º–µ–Ω–µ–¥–∂–µ—Ä
# –û—Ç–¥–µ–ª—å–Ω—ã–π heartbeat –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω
```

---

## üéÆ PLAYER API (`/api-game-player`)

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

#### `POST /api-game-player` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –∏–≥—Ä–æ–∫–∞
```json
{
  "username": "TestPlayer",
  "email": "test@example.com",
  "password": "password123",
  "avatar": "https://example.com/avatar.png" // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
}
```

**–û—Ç–≤–µ—Ç (201)**:
```json
{
  "id": 1,
  "username": "TestPlayer",
  "email": "test@example.com",
  "avatar": "https://example.com/avatar.png",
  "createdAt": "2023-10-01T12:00:00Z",
  "gamesPlayed": 0,
  "gamesWon": 0,
  "score": 0,
  "level": 1,
  "mmrOneVsOne": 500,
  "mmrTwoVsTwo": 500,
  "mmrFourPlayerFFA": 500
}
```

#### `POST /api-game-player/login` - –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
```json
{
  "email": "test@example.com",
  "password": "password123"
}
```

**–û—Ç–≤–µ—Ç (200)**: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏)

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞–º–∏

#### `GET /api-game-player` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤
**–û—Ç–≤–µ—Ç (200)**: –ú–∞—Å—Å–∏–≤ –∏–≥—Ä–æ–∫–æ–≤

#### `GET /api-game-player/{id}` - –ü–æ–ª—É—á–∏—Ç—å –∏–≥—Ä–æ–∫–∞ –ø–æ ID
**–û—Ç–≤–µ—Ç (200)**: –î–∞–Ω–Ω—ã–µ –∏–≥—Ä–æ–∫–∞

#### `PUT /api-game-player/{id}` - –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–≥—Ä–æ–∫–∞
```json
{
  "username": "NewNickname", // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
  "avatar": "https://new-avatar.com/image.png", // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
  "password": "newpassword123" // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
}
```

#### `DELETE /api-game-player/{id}` - –£–¥–∞–ª–∏—Ç—å –∏–≥—Ä–æ–∫–∞ (–º—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ)
**–û—Ç–≤–µ—Ç (204)**: –ù–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ

### Heartbeat —Å–∏—Å—Ç–µ–º–∞

–°–∏—Å—Ç–µ–º–∞ heartbeat —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** - –∫–∞–∂–¥—ã–π —Ä–∞–∑ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ —Å—Ç–∞—Ç—É—Å–∞ –∏–≥—Ä–æ–∫–∞ —á–µ—Ä–µ–∑ `GET /api-game-player/{id}` —Å–µ—Ä–≤–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏–≥—Ä–æ–∫–∞ (`LastHeartbeat`).

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã:**
- –£—Å—Ç—Ä–∞–Ω–µ–Ω–∞ –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç—å - –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —ç–Ω–¥–ø–æ–∏–Ω—Ç–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø—Ä–∏ –ª—é–±–æ–º –∑–∞–ø—Ä–æ—Å–µ —Å—Ç–∞—Ç—É—Å–∞
- –£–ø—Ä–æ—â–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ –∫–æ–¥–∞

---

## üéØ QUEUE API (`/api-game-queue`)

> **–í–Ω–∏–º–∞–Ω–∏–µ!** –û—á–µ—Ä–µ–¥–∏ —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é in-memory. –ü–æ—Å–ª–µ —Ä–µ—Å—Ç–∞—Ä—Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞ –≤—Å–µ –æ—á–µ—Ä–µ–¥–∏ —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è. –í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –æ—á–µ—Ä–µ–¥–∏ –Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è.

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—á–µ—Ä–µ–¥—å—é

#### `POST /api-game-queue/{userId}/join` - –í–æ–π—Ç–∏ –≤ –æ—á–µ—Ä–µ–¥—å
```json
{
  "matchType": 1 // 1 = 1v1, 2 = 2v2, 4 = FFA
}
```

**–û—Ç–≤–µ—Ç (200)**:
```json
{
  "message": "Successfully joined queue",
  "queueType": 1
}
```

#### `POST /api-game-queue/{userId}/leave` - –í—ã–π—Ç–∏ –∏–∑ –æ—á–µ—Ä–µ–¥–∏
**–û—Ç–≤–µ—Ç (200)**:
```json
{
  "message": "Successfully left queue"
}
```

#### `GET /api-game-queue/{userId}/status` - –°—Ç–∞—Ç—É—Å –∏–≥—Ä–æ–∫–∞ –≤ –æ—á–µ—Ä–µ–¥–∏
**–û—Ç–≤–µ—Ç (200)**:
```json
{
  "inQueue": true,
  "queueType": 1,
  "queueTime": 45, // —Å–µ–∫—É–Ω–¥—ã
  "currentMmrThreshold": 520,
  "userMmr": 500
}
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—á–µ—Ä–µ–¥–∏

#### `GET /api-game-queue/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤—Å–µ—Ö –æ—á–µ—Ä–µ–¥–µ–π
**–û—Ç–≤–µ—Ç (200)**:
```json
{
  "oneVsOne": 5,
  "twoVsTwo": 3,
  "fourPlayerFFA": 2,
  "total": 10
}
```

---

## üèÜ MATCH API (`/api-game-match`)

> **–í–Ω–∏–º–∞–Ω–∏–µ!** –ê–∫—Ç–∏–≤–Ω—ã–µ –º–∞—Ç—á–∏ —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é in-memory. –í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ –º–∞—Ç—á–∏ (–∏—Å—Ç–æ—Ä–∏—è). –ü–æ—Å–ª–µ —Ä–µ—Å—Ç–∞—Ä—Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞ –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –º–∞—Ç—á–∏ —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è.

### –°–æ–∑–¥–∞–Ω–∏–µ –º–∞—Ç—á–µ–π

#### `POST /api-game-match/create` - –°–æ–∑–¥–∞—Ç—å –º–∞—Ç—á
```json
{
  "matchType": 1, // 1 = 1v1, 2 = 2v2, 4 = FFA
  "playerIds": [1, 2],
  "teamIds": [1, 2] // –¥–ª—è –∫–æ–º–∞–Ω–¥–Ω—ã—Ö –º–∞—Ç—á–µ–π
}
```

**–û—Ç–≤–µ—Ç (200)**: –î–∞–Ω–Ω—ã–µ —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –º–∞—Ç—á–∞

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ç—á–∞–º–∏

#### `POST /api-game-match/{matchId}/finish` - –ó–∞–≤–µ—Ä—à–∏—Ç—å –º–∞—Ç—á
```json
{
  "winners": [1], // ID –∏–≥—Ä–æ–∫–æ–≤-–ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–π
  "losers": [2]   // ID –∏–≥—Ä–æ–∫–æ–≤-–ø—Ä–æ–∏–≥—Ä–∞–≤—à–∏—Ö
}
```

#### `POST /api-game-match/{matchId}/cancel` - –û—Ç–º–µ–Ω–∏—Ç—å –º–∞—Ç—á
```json
{
  "reason": "Connection issues"
}
```

#### `GET /api-game-match/{matchId}` - –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º–∞—Ç—á–µ
**–û—Ç–≤–µ—Ç (200)**: –î–∞–Ω–Ω—ã–µ –º–∞—Ç—á–∞

#### `GET /api-game-match/{matchId}/status` - –°—Ç–∞—Ç—É—Å –º–∞—Ç—á–∞
**–û—Ç–≤–µ—Ç (200)**:
```json
{
  "matchId": 1,
  "status": "InProgress",
  "matchType": 1,
  "elapsedTime": 120, // —Å–µ–∫—É–Ω–¥—ã
  "timeLimit": 300,
  "isExpired": false,
  "players": [1, 2],
  "winners": [],
  "losers": [],
  "draw": []
}
```

#### `GET /api-game-match/active` - –ê–∫—Ç–∏–≤–Ω—ã–µ –º–∞—Ç—á–∏
**–û—Ç–≤–µ—Ç (200)**: –ú–∞—Å—Å–∏–≤ –∞–∫—Ç–∏–≤–Ω—ã—Ö –º–∞—Ç—á–µ–π

#### `GET /api-game-match/user/{userId}` - –ú–∞—Ç—á–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
**–û—Ç–≤–µ—Ç (200)**: –ú–∞—Å—Å–∏–≤ –º–∞—Ç—á–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 20)

#### `POST /api-game-match/check-timeouts` - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∞–π–º–∞—É—Ç—ã
**–û—Ç–≤–µ—Ç (200)**: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–≤–µ—Ä–∫–µ —Ç–∞–π–º–∞—É—Ç–æ–≤

---

## üèõÔ∏è LOBBY API (`/api-game-lobby`)

### –°–æ–∑–¥–∞–Ω–∏–µ –ª–æ–±–±–∏

#### `POST /api-game-lobby` - –°–æ–∑–¥–∞—Ç—å –ª–æ–±–±–∏
```json
{
  "name": "My Game Room",
  "creatorId": "user123",
  "creatorName": "PlayerName",
  "maxPlayers": 4,
  "isPublic": true,
  "password": "secret123" // –¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –ª–æ–±–±–∏
}
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–±–±–∏

#### `GET /api-game-lobby` - –°–ø–∏—Å–æ–∫ –ø—É–±–ª–∏—á–Ω—ã—Ö –ª–æ–±–±–∏
**–û—Ç–≤–µ—Ç (200)**: –ú–∞—Å—Å–∏–≤ –ª–æ–±–±–∏

#### `GET /api-game-lobby/{lobbyId}` - –ü–æ–ª—É—á–∏—Ç—å –ª–æ–±–±–∏
**–û—Ç–≤–µ—Ç (200)**: –î–∞–Ω–Ω—ã–µ –ª–æ–±–±–∏

#### `POST /api-game-lobby/{lobbyId}/join` - –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –ª–æ–±–±–∏
```json
{
  "playerId": "user456",
  "playerName": "PlayerName",
  "password": "secret123" // –¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –ª–æ–±–±–∏
}
```

#### `POST /api-game-lobby/{lobbyId}/leave` - –ü–æ–∫–∏–Ω—É—Ç—å –ª–æ–±–±–∏
```json
{
  "playerId": "user456"
}
```

#### `POST /api-game-lobby/{lobbyId}/ready` - –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∏–≥—Ä–æ–∫–∞
```json
{
  "playerId": "user456",
  "isReady": true
}
```

#### `POST /api-game-lobby/{lobbyId}/start` - –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–≥—Ä—É
```json
{
  "creatorId": "user123",
  "requireAllReady": false // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
}
```

#### `POST /api-game-lobby/{lobbyId}/settings` - –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–æ–±–±–∏
```json
{
  "creatorId": "user123",
  "name": "New Name", // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
  "maxPlayers": 6,    // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
  "isPublic": false,  // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
  "password": "newsecret" // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
}
```

#### `POST /api-game-lobby/{lobbyId}/kick` - –ò—Å–∫–ª—é—á–∏—Ç—å –∏–≥—Ä–æ–∫–∞
```json
{
  "creatorId": "user123",
  "playerId": "user456"
}
```

#### `GET /api-game-lobby/{lobbyId}/status` - –°—Ç–∞—Ç—É—Å –ª–æ–±–±–∏
**–û—Ç–≤–µ—Ç (200)**:
```json
{
  "lobbyId": "lobby123",
  "name": "My Game Room",
  "status": "Waiting",
  "playerCount": 2,
  "maxPlayers": 4,
  "isPublic": true,
  "createdAt": "2023-10-01T12:00:00Z",
  "players": [
    {
      "playerId": "user123",
      "playerName": "PlayerName",
      "score": 0,
      "isReady": true
    }
  ]
}
```

#### `DELETE /api-game-lobby/{lobbyId}` - –£–¥–∞–ª–∏—Ç—å –ª–æ–±–±–∏
```json
{
  "creatorId": "user123"
}
```

---

## üìä STATISTICS API (`/api-game-statistics`)

#### `GET /api-game-statistics` - –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä—ã
**–û—Ç–≤–µ—Ç (200)**:
```json
{
  "totalPlayers": 157,
  "onlinePlayers": 12,
  "totalMatches": 245,
  "liveMatches": 3
}
```

---

## üîß ADMIN API (`/api-game-admin`)

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

#### `POST /api-game-admin/auth` - –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∞–¥–º–∏–Ω–∞
```json
{
  "token": "admin123secure"
}
```

**–û—Ç–≤–µ—Ç (200)**:
```json
{
  "success": true,
  "sessionToken": "generated-session-token"
}
```

#### `POST /api-game-admin/validate` - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ—Å—Å–∏—é
```json
{
  "sessionToken": "generated-session-token"
}
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

#### `GET /api-game-admin/statistics` - –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
**–û—Ç–≤–µ—Ç (200)**:
```json
{
  "totalPlayers": 157,
  "onlinePlayers": 12,
  "totalMatches": 245,
  "activeMatches": 3,
  "oneVsOneMatches": 120,
  "twoVsTwoMatches": 85,
  "fourPlayerFFAMatches": 40,
  "todayNewPlayers": 5,
  "todayMatches": 15,
  "weekNewPlayers": 25,
  "weekMatches": 98
}
```

#### `GET /api-game-admin/realtime-stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
**–û—Ç–≤–µ—Ç (200)**:
```json
{
  "queueStats": {
    "oneVsOne": 5,
    "twoVsTwo": 3,
    "fourPlayerFFA": 2,
    "total": 10
  },
  "activeMatches": {
    "oneVsOne": 2,
    "twoVsTwo": 1,
    "fourPlayerFFA": 0,
    "total": 3
  },
  "serverInfo": {
    "onlineNow": 12,
    "lastUpdate": "2023-10-01T12:00:00Z"
  }
}
```

#### `GET /api-game-admin/recent-matches` - –ü–æ—Å–ª–µ–¥–Ω–∏–µ –º–∞—Ç—á–∏
**–û—Ç–≤–µ—Ç (200)**: –ú–∞—Å—Å–∏–≤ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 10 –º–∞—Ç—á–µ–π

#### `GET /api-game-admin/top-players` - –¢–æ–ø –∏–≥—Ä–æ–∫–æ–≤
**–û—Ç–≤–µ—Ç (200)**:
```json
{
  "topByScore": [
    {
      "id": 1,
      "username": "ProPlayer",
      "score": 1250,
      "gamesPlayed": 50,
      "gamesWon": 35,
      "winRate": 70.0
    }
  ],
  "topByOneVsOne": [
    {
      "id": 1,
      "username": "ProPlayer",
      "mmr": 750,
      "gamesPlayed": 30,
      "gamesWon": 22
    }
  ]
}
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏

#### `POST /api-game-admin/clear-players` - –û—á–∏—Å—Ç–∏—Ç—å –∏–≥—Ä–æ–∫–æ–≤
```json
{
  "sessionToken": "generated-session-token",
  "onlyInactive": false // true = —Ç–æ–ª—å–∫–æ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ
}
```

#### `POST /api-game-admin/clear-matches` - –û—á–∏—Å—Ç–∏—Ç—å –º–∞—Ç—á–∏
```json
{
  "sessionToken": "generated-session-token",
  "onlyCompleted": true,  // true = —Ç–æ–ª—å–∫–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ
  "olderThanDays": 30     // —Å—Ç–∞—Ä—à–µ N –¥–Ω–µ–π
}
```

#### `POST /api-game-admin/set-all-players-mmr` - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å MMR –≤—Å–µ–º –∏–≥—Ä–æ–∫–∞–º
```json
{
  "sessionToken": "generated-session-token",
  "mmrValue": 500
}
```

---

## üéÆ ONLINE GAME API (`/api-game-online`)

#### `GET /api-game-online` - –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–≥—Ä—ã
**–û—Ç–≤–µ—Ç**: HTML —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∏–≥—Ä—ã

#### `GET /api-game-online/styles` - CSS —Å—Ç–∏–ª–∏
**–û—Ç–≤–µ—Ç**: CSS —Ñ–∞–π–ª

#### `GET /api-game-online/scripts` - JavaScript —Å–∫—Ä–∏–ø—Ç—ã
**–û—Ç–≤–µ—Ç**: JavaScript —Ñ–∞–π–ª

---

## üéØ LEGACY MATCH API (`/api-game-match`)

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ç—á–∞–º–∏ (Legacy)

#### `GET /api-game-match` - –í—Å–µ –º–∞—Ç—á–∏
**–û—Ç–≤–µ—Ç (200)**: –ú–∞—Å—Å–∏–≤ –≤—Å–µ—Ö –º–∞—Ç—á–µ–π

#### `POST /api-game-match` - –°–æ–∑–¥–∞—Ç—å –º–∞—Ç—á
```json
{
  "name": "Epic Battle",
  "players": [
    {
      "playerId": "user123",
      "playerName": "PlayerName"
    }
  ]
}
```

#### `POST /api-game-match/{matchId}/start` - –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∞—Ç—á
**–û—Ç–≤–µ—Ç (200)**: –î–∞–Ω–Ω—ã–µ –º–∞—Ç—á–∞

#### `POST /api-game-match/{matchId}/finish` - –ó–∞–≤–µ—Ä—à–∏—Ç—å –º–∞—Ç—á
```json
{
  "winnerId": "user123",
  "playerScores": [
    {
      "playerId": "user123",
      "score": 100
    }
  ]
}
```

#### `POST /api-game-match/{matchId}/cancel` - –û—Ç–º–µ–Ω–∏—Ç—å –º–∞—Ç—á
```json
{
  "reason": "Player disconnected"
}
```

#### `POST /api-game-match/{matchId}/player/{playerId}/ready` - –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∏–≥—Ä–æ–∫–∞
```json
{
  "isReady": true
}
```

#### `POST /api-game-match/{matchId}/update-score` - –û–±–Ω–æ–≤–∏—Ç—å —Å—á–µ—Ç
```json
{
  "playerId": "user123",
  "score": 150
}
```

#### `GET /api-game-match/{matchId}/status` - –°—Ç–∞—Ç—É—Å –º–∞—Ç—á–∞
**–û—Ç–≤–µ—Ç (200)**:
```json
{
  "matchId": "match123",
  "status": "InProgress",
  "elapsedTime": 120,
  "players": [
    {
      "playerId": "user123",
      "playerName": "PlayerName",
      "score": 100,
      "isReady": true
    }
  ]
}
```

#### `DELETE /api-game-match/{matchId}` - –£–¥–∞–ª–∏—Ç—å –º–∞—Ç—á
**–û—Ç–≤–µ—Ç (204)**: –ù–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ

---

## üîß –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö

### MatchType (GameMatchType)
- `1` - OneVsOne (1v1)
- `2` - TwoVsTwo (2v2)
- `4` - FourPlayerFFA (FFA)

### MatchStatus (GameMatchStatus)
- `InProgress` - –í –ø—Ä–æ—Ü–µ—Å—Å–µ
- `Completed` - –ó–∞–≤–µ—Ä—à–µ–Ω
- `Cancelled` - –û—Ç–º–µ–Ω–µ–Ω

### LobbyStatus
- `Waiting` - –û–∂–∏–¥–∞–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–≤
- `Starting` - –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- `InProgress` - –í –ø—Ä–æ—Ü–µ—Å—Å–µ

### Legacy MatchStatus
- `Starting` - –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- `InProgress` - –í –ø—Ä–æ—Ü–µ—Å—Å–µ
- `Finished` - –ó–∞–≤–µ—Ä—à–µ–Ω
- `Cancelled` - –û—Ç–º–µ–Ω–µ–Ω

---

## üõ°Ô∏è –°–∏—Å—Ç–µ–º–∞ MMR

### –ù–∞—á–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
- –í—Å–µ –Ω–æ–≤—ã–µ –∏–≥—Ä–æ–∫–∏ –ø–æ–ª—É—á–∞—é—Ç **500 MMR** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –º–∞—Ç—á–∞
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π MMR: **500** (–Ω–µ –º–æ–∂–µ—Ç –æ–ø—É—Å—Ç–∏—Ç—å—Å—è –Ω–∏–∂–µ)

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ MMR
- **–ü–æ–±–µ–¥–∞**: +20 MMR
- **–ü–æ—Ä–∞–∂–µ–Ω–∏–µ**: -20 MMR
- **–ù–∏—á—å—è**: MMR –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è

### Matchmaking
- –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–±–∏—Ä–∞–µ—Ç –∏–≥—Ä–æ–∫–æ–≤ —Å –±–ª–∏–∑–∫–∏–º MMR
- –ü–æ—Ä–æ–≥–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º –æ–∂–∏–¥–∞–Ω–∏—è –≤ –æ—á–µ—Ä–µ–¥–∏

---

## üîë Heartbeat —Å–∏—Å—Ç–µ–º–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- –ò–≥—Ä–æ–∫–∏ –¥–æ–ª–∂–Ω—ã –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Å–≤–æ–π —Å—Ç–∞—Ç—É—Å (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥)
- –ò–≥—Ä–æ–∫–∏ —Å—á–∏—Ç–∞—é—Ç—Å—è –æ—Ñ–ª–∞–π–Ω —á–µ—Ä–µ–∑ 2 –º–∏–Ω—É—Ç—ã –±–µ–∑ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –∏–≥—Ä–æ–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è –∏–∑ –æ—á–µ—Ä–µ–¥–µ–π

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞
- –°–µ—Ä–≤–µ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏ —É–¥–∞–ª—è–µ—Ç –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤ –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
- –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Ä–≤–µ—Ä–∞ –æ—á–∏—â–∞—é—Ç—Å—è –≤—Å–µ –æ—á–µ—Ä–µ–¥–∏

---

## ü§ñ –°–∏—Å—Ç–µ–º–∞ –±–æ—Ç–æ–≤

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- –§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: `Bots/bots_data/bots_list.json`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞–º–∏
- –†–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –ø–æ–≤–µ–¥–µ–Ω–∏—è: Aggressive, Random, Casual, Passive

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
```bash
# –ó–∞–ø—É—Å–∫ –±–æ—Ç–æ–≤
cd Bots && .\start_bots.bat

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–æ—Ç–æ–≤
.\show_stats.bat

# –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –±–æ—Ç–æ–≤ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ)
.\start_bots.bat
```

---

## üìã –ö–æ–¥—ã –æ—à–∏–±–æ–∫

### HTTP —Å—Ç–∞—Ç—É—Å—ã
- `200` - OK
- `201` - Created
- `400` - Bad Request
- `401` - Unauthorized
- `403` - Forbidden
- `404` - Not Found
- `500` - Internal Server Error
- `502` - Bad Gateway

### –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏
- "User not found" - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω
- "User is already in queue" - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –≤ –æ—á–µ—Ä–µ–¥–∏
- "User is already in a match" - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –≤ –º–∞—Ç—á–µ
- "Match not found" - –ú–∞—Ç—á –Ω–µ –Ω–∞–π–¥–µ–Ω
- "Invalid password" - –ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å
- "Lobby is full" - –õ–æ–±–±–∏ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–æ

---

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –∏–≥—Ä—ã

1. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è**:
   ```
   POST /api-game-player
   ```

2. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**:
   ```
   POST /api-game-player/login
   ```

3. **–í—Ö–æ–¥ –≤ –æ—á–µ—Ä–µ–¥—å**:
   ```
   POST /api-game-queue/{userId}/join
   ```

4. **–ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏** (–ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏):
   ```
   GET /api-game-player/{userId}
   ```

5. **–ú–∞—Ç—á –Ω–∞–π–¥–µ–Ω** (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏):
   ```
   POST /api-game-match/create
   ```

6. **–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –º–∞—Ç—á–∞**:
   ```
   POST /api-game-match/{matchId}/finish
   ```

### –°–æ–∑–¥–∞–Ω–∏–µ –ª–æ–±–±–∏

1. **–°–æ–∑–¥–∞–Ω–∏–µ**:
   ```
   POST /api-game-lobby
   ```

2. **–û–∂–∏–¥–∞–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–≤**:
   ```
   POST /api-game-lobby/{lobbyId}/join
   ```

3. **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å**:
   ```
   POST /api-game-lobby/{lobbyId}/ready
   ```

4. **–ó–∞–ø—É—Å–∫**:
   ```
   POST /api-game-lobby/{lobbyId}/start
   ```

---

## üìÅ –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
Server/
‚îú‚îÄ‚îÄ Controllers/         # API –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ PlayerController.cs
‚îÇ   ‚îú‚îÄ‚îÄ AdminController.cs
‚îÇ   ‚îú‚îÄ‚îÄ QueueController.cs
‚îÇ   ‚îú‚îÄ‚îÄ MatchController.cs
‚îÇ   ‚îú‚îÄ‚îÄ LobbyController.cs
‚îÇ   ‚îú‚îÄ‚îÄ GameMatchController.cs
‚îÇ   ‚îú‚îÄ‚îÄ GameStatisticsController.cs
‚îÇ   ‚îî‚îÄ‚îÄ OnlineGameController.cs
‚îú‚îÄ‚îÄ Models/             # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ User.cs
‚îÇ   ‚îú‚îÄ‚îÄ GameMatch.cs
‚îÇ   ‚îú‚îÄ‚îÄ MatchQueue.cs
‚îÇ   ‚îú‚îÄ‚îÄ GameModels.cs
‚îÇ   ‚îî‚îÄ‚îÄ RequestModels.cs
‚îú‚îÄ‚îÄ Data/               # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ GameDbContext.cs
‚îÇ   ‚îî‚îÄ‚îÄ Migrations/
‚îú‚îÄ‚îÄ Services/           # –°–µ—Ä–≤–∏—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ AuthService.cs
‚îÇ   ‚îî‚îÄ‚îÄ MatchmakingService.cs
‚îú‚îÄ‚îÄ Bots/              # –°–∏—Å—Ç–µ–º–∞ –±–æ—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ Bots_manager.py
‚îÇ   ‚îú‚îÄ‚îÄ bot_stats.py
‚îÇ   ‚îî‚îÄ‚îÄ start_bots.bat
‚îú‚îÄ‚îÄ wwwroot/           # –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ   ‚îî‚îÄ‚îÄ online-game/
‚îú‚îÄ‚îÄ gameserver.db      # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite
‚îî‚îÄ‚îÄ start_server.bat   # –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
```

---

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
```bash
git clone <repository>
cd Server
dotnet build
dotnet run
```

### –ü—Ä–æ–¥–∞–∫—à–Ω
- –°–µ—Ä–≤–µ—Ä —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –Ω–∞ `https://renderfin.com`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç SQLite –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞–º–∏
- –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–º–æ—â–∏:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
3. –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ heartbeat —Å–∏—Å—Ç–µ–º—É

**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: 2025-01-10
**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏**: 1.0 